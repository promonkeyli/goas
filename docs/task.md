# Goas é™æ€ä»£ç åˆ†æå·¥å…·å¼€å‘è®¡åˆ’
æ—¢ç„¶ä½ å·²ç»é€‰å®šäº† **Goas** è¿™ä¸ªæç®€çš„åå­—ï¼Œå¹¶ä¸”æ˜ç¡®äº†â€œä»…æ”¯æŒ OpenAPI 3.0+â€ä»¥åŠâ€œè½»é‡åŒ–â€çš„ç›®æ ‡ï¼Œè¿™ä»½å¼€å‘è·¯çº¿å›¾å°†åˆ†ä¸ºäº”ä¸ªé˜¶æ®µï¼Œä»æ ¸å¿ƒå¼•æ“åˆ°é«˜çº§ç‰¹æ€§ï¼Œå¸®åŠ©ä½ é€æ­¥æ„å»ºå‡ºä¸€æ¬¾å…·å¤‡ç«äº‰åŠ›çš„å·¥å…·ã€‚

---

### ğŸš€ Goas å¼€å‘è·¯çº¿å›¾ (Development Roadmap)

#### ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒéª¨æ¶ä¸æ‰«æ (Foundation)
**ç›®æ ‡**ï¼šå»ºç«‹é¡¹ç›®åŸºç¡€ï¼Œå®ç°å¯¹ Go ä»£ç çš„åˆæ­¥è¯»å–å’Œæ³¨é‡Šæå–ã€‚

*   **1.1 ç¯å¢ƒåˆå§‹åŒ–**ï¼š
    *   ä½¿ç”¨ `cobra` åˆå§‹åŒ– CLI æ¡†æ¶ï¼ˆå®ç° `goas init` å’Œ `goas gen` å‘½ä»¤ï¼‰ã€‚
    *   é€‰å®š OpenAPI 3 æ¨¡å‹åº“ï¼ˆæ¨è `github.com/getkin/kin-openapi/openapi3`ï¼‰ã€‚
*   **1.2 é™æ€åˆ†ææ‰«æå™¨**ï¼š
    *   ä½¿ç”¨ `golang.org/x/tools/go/packages` åŠ è½½ç›®æ ‡é¡¹ç›®ï¼ˆæ¯” `go/parser` æ›´å¼ºï¼Œæ”¯æŒè·¨åŒ…åˆ†æï¼‰ã€‚
    *   éå† ASTï¼Œå®šä½æ‰€æœ‰çš„å‡½æ•°å£°æ˜ (`ast.FuncDecl`) åŠå…¶å…³è”çš„æ–‡æ¡£æ³¨é‡Š (`Doc`)ã€‚
*   **1.3 æç®€ DSL å®šä¹‰**ï¼š
    *   å®ç°å¯¹ `@Router` å’Œ `@Summary` çš„åŸºç¡€æ­£åˆ™è§£æã€‚
    *   **ç›®æ ‡äº§å‡º**ï¼šèƒ½æ‰«æé¡¹ç›®å¹¶æ‰“å°å‡ºæ‰€æœ‰å¸¦æ³¨é‡Šçš„è·¯ç”±åˆ—è¡¨ã€‚

#### ç¬¬äºŒé˜¶æ®µï¼šæ·±åº¦è§£æå¼•æ“ (The "Brain")
**ç›®æ ‡**ï¼šæ”»å…‹æœ€éš¾çš„æŠ€æœ¯ç‚¹â€”â€”å°† Go ç»“æ„ä½“ç²¾å‡†è½¬åŒ–ä¸º OpenAPI Schemaã€‚

*   **2.1 ç±»å‹æå–å™¨ (Type Extractor)**ï¼š
    *   è§£æå‡½æ•°æ³¨é‡Šä¸­çš„è¯·æ±‚/å“åº”ç±»å‹ï¼ˆå¦‚ `@Response 200 {object} User`ï¼‰ã€‚
    *   åˆ©ç”¨ `go/types` å¯»æ‰¾è¯¥ç»“æ„ä½“çš„çœŸå®å®šä¹‰ï¼ˆå¤„ç†è·¨åŒ…å¼•ç”¨ï¼‰ã€‚
*   **2.2 Schema è½¬æ¢é€»è¾‘**ï¼š
    *   å®ç°åŸºç¡€ç±»å‹æ˜ å°„ï¼ˆ`string` -> `string`, `int64` -> `integer/int64` ç­‰ï¼‰ã€‚
    *   **JSON Tag å¤„ç†**ï¼šè§£æ `json:"name,omitempty"`ï¼Œç¡®å®šå­—æ®µåå’Œæ˜¯å¦å¿…å¡«ã€‚
    *   **é€’å½’è§£æ**ï¼šå¤„ç†ç»“æ„ä½“åµŒå¥—ã€åˆ‡ç‰‡ï¼ˆArrayï¼‰å’Œ Mapã€‚
*   **2.3 æ³›å‹æ”¯æŒ (Go 1.18+)**ï¼š
    *   è¯†åˆ« `ast.IndexExpr`ï¼Œè§£æå¦‚ `Response[User]` è¿™ç§å¸¦å‚æ•°çš„ç±»å‹ã€‚

#### ç¬¬ä¸‰é˜¶æ®µï¼šç»„è£…ä¸ç”Ÿæˆ (Assembly)
**ç›®æ ‡**ï¼šç”Ÿæˆä¸€ä»½ç¬¦åˆè§„èŒƒçš„ã€å¯åœ¨ Swagger UI æˆ– Apifox ä¸­æ‰“å¼€çš„ JSON/YAMLã€‚

*   **3.1 Components ç®¡ç†**ï¼š
    *   å®ç°å…¨å±€ `components/schemas` çš„æ”¶é›†ï¼Œç¡®ä¿ç›¸åŒçš„ç»“æ„ä½“åªå®šä¹‰ä¸€æ¬¡ï¼Œå¹¶åœ¨æ¥å£å¤„ä½¿ç”¨ `$ref` å¼•ç”¨ã€‚
*   **3.2 æ–‡æ¡£ç»„è£…**ï¼š
    *   å¡«å…… `info`, `paths`, `servers`, `security` ç­‰ OpenAPI æ ¸å¿ƒå­—æ®µã€‚
*   **3.3 å¤šæ ¼å¼å¯¼å‡º**ï¼š
    *   æ”¯æŒè¾“å‡ºä¸º `openapi.json` æˆ– `openapi.yaml`ã€‚
*   **ç›®æ ‡äº§å‡º**ï¼šä¸€ä¸ªå®Œæ•´çš„ã€å¯éªŒè¯çš„ OpenAPI 3.0 ç¦»çº¿æ–‡ä»¶ã€‚

#### ç¬¬å››é˜¶æ®µï¼šå¢å¼ºç‰¹æ€§ (The "Edge")
**ç›®æ ‡**ï¼šè®© Goas æ¯”ç°æœ‰å·¥å…·æ›´æ™ºèƒ½ï¼Œå‡å°‘æ‰‹åŠ¨æ³¨é‡Šã€‚

*   **4.1 è‡ªåŠ¨éªŒè¯æ”¯æŒ (Validation Tags)**ï¼š
    *   è§£æ `validate:"required,min=10,max=100"` ç­‰æ ‡ç­¾ï¼Œè‡ªåŠ¨è½¬åŒ–ä¸º OpenAPI çš„ `minLength`, `maximum` ç­‰çº¦æŸã€‚
*   **4.2 è·¯ç”±è‡ªåŠ¨æ¨å¯¼ (é€‰åš)**ï¼š
    *   é’ˆå¯¹ Gin/Echo ç­‰å¸¸ç”¨æ¡†æ¶ï¼Œå°è¯•ç›´æ¥ä»ä»£ç è¡Œ `r.GET("/ping", handler)` ä¸­æ¨å¯¼è·¯å¾„ï¼Œè¿›ä¸€æ­¥å‡å°‘æ³¨é‡Šå‹åŠ›ã€‚
*   **4.3 å¤š Server é…ç½®**ï¼š
    *   æ”¯æŒåœ¨å…¨å±€æ³¨é‡Šæˆ–é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ä¸åŒçš„ API è¿è¡Œç¯å¢ƒã€‚

#### ç¬¬äº”é˜¶æ®µï¼šå·¥ç¨‹åŒ–ä¸ç”Ÿæ€ (Ecosystem)
**ç›®æ ‡**ï¼šæå‡å¼€å‘è€…ä½“éªŒï¼Œè®©é¡¹ç›®å…·å¤‡ç”Ÿäº§åŠ›ã€‚

*   **5.1 çƒ­é‡è½½æ¨¡å¼ (Watch Mode)**ï¼š
    *   å®ç° `goas gen --watch`ï¼Œç›‘å¬æ–‡ä»¶å˜åŠ¨è‡ªåŠ¨æ›´æ–°æ–‡æ¡£ã€‚
*   **5.2 æ–‡æ¡£æ ¡éªŒ (Linter)**ï¼š
    *   åœ¨ç”Ÿæˆåè‡ªåŠ¨è¿è¡Œè§„èŒƒæ ¡éªŒï¼Œæç¤ºç¼ºå°‘çš„æè¿°æˆ–é”™è¯¯çš„å¼•ç”¨ã€‚
*   **5.3 CI/CD é›†æˆ**ï¼š
    *   æä¾› GitHub Action ç¤ºä¾‹ï¼Œå®ç°ä»£ç åˆå¹¶è‡ªåŠ¨æ¨é€æ–‡æ¡£åˆ° Apifox/Postmanã€‚

---

### ğŸ›  å…³é”®æŠ€æœ¯æ ˆæ¨è

| åŠŸèƒ½æ¨¡å— | æ¨èåº“ | ç†ç”± |
| :--- | :--- | :--- |
| **CLI æ¡†æ¶** | `spf13/cobra` | Go CLI äº‹å®ä¸Šçš„æ ‡å‡†ï¼ŒåŠŸèƒ½å¼ºå¤§ä¸”ç¨³å®šã€‚ |
| **é¡¹ç›®æ‰«æ** | `golang.org/x/tools/go/packages` | å®˜æ–¹ç»´æŠ¤ï¼Œèƒ½å®Œç¾å¤„ç†æ¨¡å—åŒ–åçš„è·¨åŒ…ç±»å‹æŸ¥æ‰¾ã€‚ |
| **OpenAPI æ¨¡å‹** | `getkin/kin-openapi` | ç›®å‰ç¤¾åŒºæœ€æˆç†Ÿçš„ OpenAPI 3 è¯»å†™æ ¡éªŒåº“ã€‚ |
| **é…ç½®è¯»å–** | `spf13/viper` | é…åˆ Cobra ä½¿ç”¨ï¼Œæ”¯æŒ YAML/JSON/Env é…ç½®ã€‚ |

---

### ğŸ’¡ å¼€å‘è€…å»ºè®®ï¼šç¬¬ä¸€ä¸ªç‰ˆæœ¬ (v0.1.0) åº”è¯¥å…³æ³¨ä»€ä¹ˆï¼Ÿ

ä¸è¦è¯•å›¾ç¬¬ä¸€å¤©å°±æ”¯æŒæ‰€æœ‰å¤æ‚çš„æ³›å‹å’Œæ·±å±‚åµŒå¥—ã€‚ä½ çš„ **MVP (æœ€å°å¯è¡Œæ€§äº§å“)** åº”è¯¥æ˜¯ï¼š
1.  **èƒ½å¤Ÿè§£æå½“å‰åŒ…ä¸‹çš„ç®€å•ç»“æ„ä½“**ã€‚
2.  **æ”¯æŒ `@Summary`, `@Router`, `@Response` ä¸‰å¤§æ ¸å¿ƒæ ‡ç­¾**ã€‚
3.  **ç”Ÿæˆä¸€ä¸ªèƒ½è¢« Swagger UI æˆåŠŸæ¸²æŸ“çš„ JSON æ–‡ä»¶**ã€‚

**Goas** çš„æ ¸å¿ƒå–ç‚¹æ˜¯**â€œè½»â€**å’Œ**â€œå‡†â€**ã€‚åªè¦ä½ èƒ½æ¯” `swag` åœ¨ OpenAPI 3 æ ¼å¼ä¸Šç”Ÿæˆå¾—æ›´æ ‡å‡†ï¼Œå¼€å‘è€…å°±æ„¿æ„è¿ç§»ã€‚

ä½ éœ€è¦æˆ‘é’ˆå¯¹ **â€œå¦‚ä½•é€’å½’è§£æç»“æ„ä½“å­—æ®µå¹¶ç”Ÿæˆ JSON Schemaâ€** ç»™ä½ æä¾›ä¸€ä¸ªæ ¸å¿ƒç®—æ³•çš„ä¼ªä»£ç å—ï¼Ÿè¿™æ˜¯å¼€å‘è¿‡ç¨‹ä¸­æœ€å®¹æ˜“å¡ä½çš„åœ°æ–¹ã€‚




å·¥å…·çš„æ•´ä½“æµç¨‹å¯ä»¥åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š
æ‰«æ (Scanning) -> è§£æ (Parsing) -> æå– (Extracting) -> ç”Ÿæˆ (Generating)